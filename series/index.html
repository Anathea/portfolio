
<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1"><title>Gestionnaire de séries</title><link rel="stylesheet" type="text/css" href="style.min.css"><style>body{padding:50px;background:#eee}.title{padding:0 20%;text-align:center}.container form{max-width:60%;margin:40px auto}.container .list{padding:20px;text-align:center;border:1px solid #ccc;border-radius:8px}.container .columns{border-bottom:1px solid #ccc}.container .columns:last-child{border-bottom:0}.current-eps{padding:0 10px}.input{border-left:0;border-right:0;border-top:0;border-width:2px;border-color:#c8c8c8;box-shadow:none;background:0}form button{display:block;width:100%}</style></head><body><div class="container"><h1 class="title is-1 has-text-centered">Gestionnaire de séries en tout genre</h1><form action=""><div class="field"><label class="label">Type</label><p class="control"><input class="input" type="text" name="type"></p></div><div class="field"><label class="label">Titre</label><p class="control"><input class="input" type="text" name="title"></p></div><div class="field"><label class="label">Épisodes vus</label><p class="control"><input class="input" type="number" name="seen"></p></div><div class="field"><label class="label">Épisodes total</label><p class="control"><input class="input" type="number" name="total"></p></div><div class="field"><p class="control"><button class="button is-success">Ajouter</button></p></div></form><h2 class="title is-2">Liste des séries ajoutées</h2><div class="list"><div class="field has-addons filters"><p class="control"><a class="button"><span>All</span></a></p></div><div class="series"><div class="columns"><div class="column"><strong>Type</strong></div><div class="column"><strong>Titre</strong></div><div class="column"><strong>Episodes en cours</strong></div><div class="column"><strong>Episodes sortis au total</strong></div></div><div class="series_list"></div></div></div></div><script>var form=document.querySelector("form");var list=document.querySelector(".series_list");var filters=document.querySelector(".filters");var filter_all_btn=document.querySelector(".filters .control");var fields={type:document.querySelector('[name="type"]'),title:document.querySelector('[name="title"]'),seen:document.querySelector('[name="seen"]'),total:document.querySelector('[name="total"]')};var series_data=getLocalData();var filters_data=[];var filter_active=null;for(var i=0;i<series_data.length;i++){addFilterInNotExist(series_data[i].type);showSerie(series_data[i])}applyActiveFilterToList();form.addEventListener("submit",getSerieFromForm);filter_all_btn.addEventListener("click",showAllSeries);function getSerieFromForm(b){b.preventDefault();var a={type:fields.type.value,title:fields.title.value,seen:Number(fields.seen.value),total:Number(fields.total.value)};form.reset();series_data.push(a);showSerie(a);saveSeries(series_data)}function showSerie(b){addFilterInNotExist(b.type);var a=document.createElement("DIV");a.classList.add("columns");var c='<div class="column">'+b.type+"</div>";c+='<div class="column">'+b.title+"</div>";c+='<div class="column">';c+='<span class="current-eps">'+b.seen+'</span> <a href="#" class="plus button"> + </a> <a href="#" class="minus button"> - </a>';c+="</div>";c+='<div class="column">'+b.total+"</div>";a.innerHTML=c;list.appendChild(a);addPlusAndMinusEvents(a,b)}function addPlusAndMinusEvents(b,d){var e=b.querySelector(".plus");var c=b.querySelector(".minus");var a=b.querySelector(".current-eps");e.addEventListener("click",function(f){f.preventDefault();if(d.seen<d.total){d.seen++;a.textContent=d.seen;saveSeries(series_data)}});c.addEventListener("click",function(f){f.preventDefault();if(d.seen>0){d.seen--;a.textContent=d.seen;saveSeries(series_data)}})}function addFilterInNotExist(a){if(filters_data.indexOf(a)===-1){setFilter(a)}}function setFilter(a){filters_data.push(a);var b=document.createElement("p");b.classList.add("control");b.innerHTML='<a class="button"><span>'+a+"</span></a>";filters.appendChild(b);b.addEventListener("click",function(c){c.preventDefault();filter_active=a;applyActiveFilterToList()})}function showAllSeries(a){a.preventDefault();filter_active=null;applyActiveFilterToList()}function applyActiveFilterToList(){for(var a=0;a<list.children.length;a++){if(filter_active&&filter_active!==series_data[a].type){list.children[a].style.display="none"}else{list.children[a].style.display=""}}}function saveSeries(a){a=JSON.stringify(a);localStorage.setItem("mon_app_du_turfu_series",a)}function getLocalData(){var a=localStorage.getItem("mon_app_du_turfu_series");if(!a){a=[]}else{a=JSON.parse(a)}return a};</script></body></html>